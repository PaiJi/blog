---
title: 吹吹灰，鸡排的部落格擦亮了！
date: 2021-10-22 03:13:45
tags: 
categories: ['日记']
permalink: 'new-theme-new-start/'
photos:
---
上一次写博客是在2020年，没错，这篇 {% post_link recommand-spotify %}，那之后发生了很多事情，首先是任职的公司宣布了解散，然后就在家里好好休息了一段时间。 于是乘着重新找工作的时候，重写了首页和博客的主题，也算是练练手免得基础全都忘光了。
<!-- more -->

## 新架构

### 首页

首页方面，因为在公司一直都用的React，再加上我一直很想要SPA一样的体验，又放不下SEO，所以一番调研后选了Gatsby——据说是前端界的当红炸子鸡。再配上TailwindCSS，<del>哼哧哼哧很快就写完了</del>，成品就是大家现在看到的，没有什么复杂元素的，简 单 首 页！

友情链接、最爱、以及未来会有的实验室页面，渲染数据源都是json文件，简单新增几行就能完成更新。终于是迈进了现代前端的大门。想起了多年前傻傻地手写DOM的那个自己。

### 博客

博客这边的改动比较大，首先是从WordPress换到了Hexo，如果有人问起本博客之前那篇《我为什么最后还是选择了WordPrees》（已经删了！），只能用“人在不同的时期追求的标准不一致”的说辞来应付。至于为什么是Hexo，有以下几点原因：

1. WordPress大而全，然而我并不需要其中的绝大部分内容，相反，我一直在为这些用不上的内容支付成本。
2. 抛开博客圈经典古训：“当你看到你的博客主题有两个人以上在用时就该写个新的了”不谈，我个人当然是想要一个高自定义能力的博客，然而WordPress的自主开发上手程度让人望而生却，你掰开主题模板的源码一看，就像是望进了一个树根下深不见底的兔子洞。

综上，我选择了Hexo。用上自己比较熟悉的pug和stylus，从O开始写了一套Hexo主题——Ego，保持了和主页一致的风格和配色，满足了自己多年的小心愿，文章头图的功能，再也不需要一个偶尔会不好用的插件来实现了。

### 后端

后端方面，所有的服务现在都已docker化，还用上了挺会自吹自擂的caddy来做web server。

所以最后总结一下就是：
首页：Gatsby / React / PostCSS / TailwindCSS
博客：Hexo / Pug / Stylus 
后端：Ubuntu / Docker / caddy2 

<!-- ## 上线！
切解析，传文件，写好caddy配置，reload，刷新页面！一套组合拳下来，我得到了一个渲染好要十多秒的1.7MB的index.html......坑爹啊。打开源码一顿端详，发现是内联首屏样式的时候把TailwindCSS全家都带进来了，赶紧改了配置文件进行一个摇树。又想起caddy的gzip压缩没开，加上压缩后首页传输体积降到了7KB，来到了勉强能接受的地步。 -->


## 收尾工作
接下来还有几件事要做，分别是：

### 移动端的全面兼容
你可能已经发现了，首页和博客当前均没有兼容移动端。当然啦，写的时候就没想太多，反正也没有人会来看，移动端之后再补上。

### 首页的性能优化
感觉首页还有优化的空间，自定义字体在加载好后有一个切换的过程，看起来不太舒服。

### 给博客加一些小功能
评论功能、轻量统计、针对技术类文章的超时提示。

### 博客某些特定元素的样式不正常
似乎对于超长文本的超链接warp有问题。

### 修订以前的博文&把草稿箱里堆的发出来
以前的博文有一些已不适合公开（流水账什么的），已经进行了移除，剩余的会进行修订，比如补上头图神马的。以及，在导入博文的时候，看到了堆在WordPress里的草稿们，都是写了一个开头就跑了，想了想还是挺想发出来的，找个时间写完吧。

### 自动编译及部署
还是有点放不下国内访问速度这个心结，想了想最后没有选择GitHub Page和vercel这类产品，应该最后还是会选择用Github CI编译后推送到自己的机器上吧。

最后，我们下篇博文见，希望不会等太久。